<!DOCTYPE html>

<title>First Service Worker</title>

<h1>Service Worker Test</h1>
<output></output>

<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker
      .register("serviceworker.js", {
        scope: "/",
      })
      .then((registration) => {
        const scope = registration.scope;
        document.querySelector(
          "output"
        ).innerHTML = `Service worker registered properly at ${scope}`;
      })
      .catch((error) => {
        document.querySelector("output").innerHTML =
          "Service worker NOT registered";
      });
  } else {
    document.querySelector("output").innerHTML = "Service worker NOT available";
  }

  if ("serviceWorker" in navigator) {
    navigator.serviceWorker
      .getRegistration()
      .then((registration) => {
        registration.addEvenListener("updateFound", (event) => {
          const swInstalling = registration.installing;
          swInstalling.addEvenListener("statechange", () => {
            if (swInstalling.state == "installed") {
              console.log("Installed");
            }
          });
        });
      })
      .catch((error) => {});
  }
</script>
